
# 🚀 SS 프로젝트 (StockSync) 최종 기초 설계서 요약

## 1. 프로젝트 개요 및 목표

| 구분 | 내용 |
| :--- | :--- |
| **프로젝트 명** | **SS Project (StockSync)** |
| **주요 타겟** | 엑셀 기반 재고 관리로 인한 **인적 실수 및 데이터 불일치**를 겪는 **쇼핑몰/E-commerce 기업 (B2B)** |
| **핵심 가치** | **트랜잭션 기반**의 안정적인 재고 관리와 **승인 프로세스**를 통한 실수 방지. |

---

## 2. 기술 아키텍처 및 역할 분담 (최종 결정)

SS 프로젝트는 **Java Spring Boot**를 핵심 비즈니스 로직 및 서버로 사용하고, **Python**은 데이터 처리 보조 도구로 활용하는 구조를 채택합니다.

### A. 기술 스택

| 구분 | 기술 및 라이브러리 | 역할 |
| :--- | :--- | :--- |
| **핵심 백엔드** | **Java Spring Boot** (Spring Security 포함) | 서버 운영, API 컨트롤, DB 트랜잭션 및 보안 담당. |
| **데이터 처리** | **Python 3 + Pandas** | 엑셀 파싱, 데이터 유효성 검증, 복잡한 통계 계산 담당. |
| **DB** | **PostgreSQL** | 재고 변동 로그 및 마스터 데이터 저장. |
| **프론트엔드** | React + Data Grid Library | 사용자 인터페이스 및 엑셀 유사 입력 화면 제공. |

### B. Spring Boot ↔ Python 연동 방식

* **방식:** **IPC (Inter-Process Communication)**
* **구조:** Spring Boot 서버 내에서 `ProcessBuilder` 등을 사용하여 **Python 스크립트를 직접 실행**하고, Python은 처리 결과를 **JSON 형태로 표준 출력(STDOUT)**으로 반환하면, Spring Boot가 이를 읽어 최종 DB 처리를 진행합니다. 
* **선택 이유 (1인 개발):** 별도의 서버 구축/관리 부담 없이 데이터 처리 능력을 확보할 수 있는 가장 단순하고 효율적인 초기 아키텍처입니다.

---

## 3. 데이터 모델 및 핵심 로직

### A. 데이터 모델 (핵심)

| 테이블 명 | 주요 역할 | 특이 사항 |
| :--- | :--- | :--- |
| **Products** | 제품 마스터 및 현재 재고 캐싱 | `sku`, `current_stock` 포함 |
| **Inventory\_Transactions** | **모든 재고 변동의 로그 기록 (Event Sourcing)** | `product_id` (FK), `change_type`, `quantity`, **`status` (대기/승인/취소)** |
| **Upload\_Templates** | 기업별 엑셀 컬럼 매핑 정보 저장 | **재사용성을 위한 템플릿 저장** |

### B. 재고 변동 핵심 로직 흐름

1.  **엑셀 업로드 (Spring Boot):** 파일 수신 후 Python 실행 요청.
2.  **데이터 파싱 (Python/Pandas):** 엑셀을 읽고 데이터를 정제하여 JSON으로 반환.
3.  **임시 저장 (Spring Boot):** 받은 JSON 데이터를 `Inventory_Transactions` 테이블에 **`status = '대기'`** 상태로 임시 저장.
4.  **승인 프로세스 (Spring Boot Service):** 관리자가 웹에서 승인하면, Spring Boot가 해당 트랜잭션을 읽어 재고 계산 후 `Products` 테이블 업데이트 및 `status = '승인'`으로 변경.

---

## 4. 주요 기능 명세 (총정리)

| 기능 분류 | 기능 명 | 상세 내용 |
| :--- | :--- | :--- |
| **실수 방지 및 통제** | **재고 변동 승인 프로세스** | 관리자의 최종 승인 없이는 재고에 반영되지 않음. |
| | **트랜잭션 취소/롤백** | 잘못 승인된 특정 트랜잭션을 Spring Boot가 제어하여 원상 복구 및 취소 로그 기록. |
| | **고정 포맷/템플릿 저장** | 표준 템플릿 사용을 유도하며, 사용자 정의 매핑 정보를 저장하여 재사용. |
| **효율화 및 UX** | **웹 그리드 수동 입력** | 엑셀 파일 없이 소량의 입출고 내역을 웹에서 즉시 입력 가능. |
| | **CS 특화 주문번호 연동** | 출고 로그에 주문/송장 번호를 함께 기록하여 CS 응대 효율화. |
| **분석 및 자동화** | **판매 속도 계산 (ADS)** | Python 연동을 통해 일 평균 판매 수량을 계산하고 재고 소진 시점을 예측. |
| | **간편 월간 리포트** | 지난달의 총 입출고 및 재고 총액을 요약한 리포트 자동 생성. |
| | **안전 재고 경고 알림** | `safety_stock` 미달 시, Spring Boot가 알림을 발송. |